# TAG
Text-to-Audio-Generator

## Bot

**Bot** – это главный сервис программы, в котором происходят все внешние взаимодействия с пользователем.

**context** – это модуль, в котором содержится информация о ID чата, ID пользователя, текстовый запрос о желаемой аудиозаписи и ее продолжительность в секундах. Необходим для поддержания сессии пользователя. 

**sound_request** – это такая абстракция как request, представленная в виде класса, который в качестве атрибутов принимает ID чата, ID пользователя, текстовый запрос о желаемой аудиозаписи и ее продолжительность в секундах, а в качестве методов собирает эти данные в JSON и разбирает данные.

**sender_queue** – это класс, в котором инкапсулируется взаимодействие с программным брокером сообщений RabbitMQ, то есть скрываются тонкости реализации взаимодействия с очередью RabbitMQ, в том числе отправка сообщений в очередь и функция создания очереди. Этот класс упрощает взаимодействие с очередью RabbitMQ в дальнейшем, что позволяет достаточно просто отправлять сообщения в очередь. В качестве атрибута принимает уникальное имя очереди. 

**sound_responce** – это класс, который инкапсулирует (или скрывает) тонкости по разбору и формированию JSON’а, но уже для ответного сообщения, в котором есть ID чата, ID пользователя и сгенерированная по запросу пользователя звукозапись.

**sound_receiver** – это класс, который соединятся с очередью «ResponseQueue», далее из sound_responce она принимает сгенерированную аудиозапись, отправляет ее в Bot и вызывает метод callback, который в свою очередь очищает context, чтобы пользователь мог снова отправить запрос. SoundReceiver работает в отдельном потоке, так как он (SoundReceiver) запускается вместе с ботом, но из-за того, что работа бота останавливает основной поток, то эта часть запускается в отдельном потоке для возможности одновременной работы бота и приема сообщений из очереди. Другими словами, для того чтобы не случилась ситуация, когда один пользователь начал генерацию аудиозаписи, и сервис просто повис и другие пользователи не могли отправить сообщение в бота, SoundReceiver работает в отдельном потоке. 
